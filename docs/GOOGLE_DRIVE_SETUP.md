# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive API –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Drive API –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ AidKit.

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Google Cloud Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ **Project ID** –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

## –®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ Google Drive API

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **APIs & Services** > **Library**
2. –ù–∞–π–¥–∏—Ç–µ "Google Drive API"
3. –ù–∞–∂–º–∏—Ç–µ **Enable** (–í–∫–ª—é—á–∏—Ç—å)

## –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ OAuth 2.0 Client ID

> **–í–∞–∂–Ω–æ:** –î–∞–∂–µ –¥–ª—è Android-only –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω—ã –æ–±–∞ —Ç–∏–ø–∞ Client ID:
> - Web Client ID (–¥–ª—è OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
> - Android Client ID (–¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth Consent Screen

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** > **OAuth consent screen**
2. –í—ã–±–µ—Ä–∏—Ç–µ **External** (–µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - **App name**: AidKit
   - **User support email**: –≤–∞—à email
   - **Developer contact information**: –≤–∞—à email
4. –ù–∞–∂–º–∏—Ç–µ **Save and Continue**
5. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **Scopes** –Ω–∞–∂–º–∏—Ç–µ **Add or Remove Scopes**
6. –ù–∞–π–¥–∏—Ç–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ scope: `https://www.googleapis.com/auth/drive.appdata`
7. –ù–∞–∂–º–∏—Ç–µ **Update** –∏ **Save and Continue**
8. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Test users** (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
9. –ù–∞–∂–º–∏—Ç–µ **Save and Continue**

### –°–æ–∑–¥–∞–Ω–∏–µ Web Client ID

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** > **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** > **OAuth client ID**
3. –í—ã–±–µ—Ä–∏—Ç–µ **Application type**: **Web application**
4. –í–≤–µ–¥–∏—Ç–µ **Name**: "AidKit Web Client"
5. –í **Authorized redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ:
   - `http://localhost`
6. –ù–∞–∂–º–∏—Ç–µ **Create**
7. **–í–ê–ñ–ù–û**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ **Client ID** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ

### –°–æ–∑–¥–∞–Ω–∏–µ Android Client ID

1. –í **Credentials** –Ω–∞–∂–º–∏—Ç–µ **Create Credentials** > **OAuth client ID**
2. –í—ã–±–µ—Ä–∏—Ç–µ **Application type**: **Android**
3. –í–≤–µ–¥–∏—Ç–µ **Name**: "AidKit Android"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ **Package name**: `com.aidkit` (–∏–ª–∏ –≤–∞—à package name)
5. –î–ª—è **SHA-1 certificate fingerprint**:
   
   **Debug Certificate** (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
   ```bash
   cd android
   # macOS/Linux:
   keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android
   
   # Windows:
   keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
   ```
   
   **Release Certificate** (–¥–ª—è production):
   ```bash
   cd android/app
   keytool -list -v -keystore aidkit.keystore -alias aidkit
   ```
   
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SHA-1 fingerprint –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ
7. –ù–∞–∂–º–∏—Ç–µ **Create**

## –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4.1. –û–±–Ω–æ–≤–∏—Ç–µ Web Client ID –≤ –∫–æ–¥–µ

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `src/screens/Backup/BackupScreen.tsx` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```typescript
const WEB_CLIENT_ID = 'YOUR_WEB_CLIENT_ID.apps.googleusercontent.com'
```

–ù–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Web Client ID –∏–∑ —à–∞–≥–∞ 3.

### 4.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ AndroidManifest.xml

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `android/app/src/main/AndroidManifest.xml` –µ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç:

```xml
<uses-permission android:name="android.permission.INTERNET" />
```

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ iOS (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ iOS –≤–µ—Ä—Å–∏—é)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç —à–∞–≥ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –µ—Å–ª–∏ –≤—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ —Ç–æ–ª—å–∫–æ Android –≤–µ—Ä—Å–∏—é.

–î–ª—è iOS —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ iOS Client ID –≤ Google Cloud Console (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Android)
2. –û—Ç–∫—Ä–æ–π—Ç–µ `ios/AidKit/Info.plist`
3. –î–æ–±–∞–≤—å—Ç–µ URL scheme:

```xml
<key>CFBundleURLTypes</key>
<array>
  <dict>
    <key>CFBundleURLSchemes</key>
    <array>
      <string>com.googleusercontent.apps.YOUR_CLIENT_ID</string>
    </array>
  </dict>
</array>
```

–ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_CLIENT_ID` –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π Client ID (–±–µ–∑ `.apps.googleusercontent.com`).

## –®–∞–≥ 6: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è iOS)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç —à–∞–≥ —Ç–æ–ª—å–∫–æ –¥–ª—è iOS. –î–ª—è Android –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ pod –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
cd ios
pod install
cd ..
```

## –®–∞–≥ 7: –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Android

```bash
yarn android
```

### iOS

```bash
yarn ios
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ï—â–µ** > **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
3. –ù–∞–∂–º–∏—Ç–µ **–í–æ–π—Ç–∏ –≤ Google Drive**
4. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ Google Drive
5. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
   - –°–æ–∑–¥–∞–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –≤ Google Drive
   - –°–∫–∞—á–∏–≤–∞—Ç—å –∏–∑ Google Drive
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±—ç–∫–∞–ø–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–∞

–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –≤–∫–ª—é—á–∞–µ—Ç:
- üì¶ –í—Å–µ –∞–ø—Ç–µ—á–∫–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- üíä –í—Å–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤
- üìä –î–∞–Ω–Ω—ã–µ –æ –∑–∞–ø–∞—Å–∞—Ö –∏ —Å—Ä–æ–∫–∞—Ö –≥–æ–¥–Ω–æ—Å—Ç–∏
- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–ª–µ–Ω–∞—Ö —Å–µ–º—å–∏
- ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- üìù –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–µ–º–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤
- üõí –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Google Drive –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **appDataFolder** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –∑–∞—â–∏—â—ë–Ω–Ω—É—é –ø–∞–ø–∫—É, –¥–æ—Å—Ç—É–ø–Ω—É—é —Ç–æ–ª—å–∫–æ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –î—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–∞—à–∏–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—è–º
- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é
- –¢–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Developer Error" –ø—Ä–∏ –≤—Ö–æ–¥–µ

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Web Client ID —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Android Client ID —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º SHA-1
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google Drive API –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –û—à–∏–±–∫–∞ "Access Denied" –∏–ª–∏ "403"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π scope: `https://www.googleapis.com/auth/drive.appdata`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ OAuth Consent Screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ù–µ —É–¥–∞—ë—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏

### SHA-1 –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É –æ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ SHA-1:
1. –£–¥–∞–ª–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `cd android && ./gradlew clean`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–Ω–æ–≤–∞: `yarn android`

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Google Sign-In –¥–ª—è React Native](https://github.com/react-native-google-signin/google-signin)
- [Google Drive REST API v3](https://developers.google.com/drive/api/v3/reference)
- [OAuth 2.0 –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](https://developers.google.com/identity/protocols/oauth2/native-app)

